apiVersion: garage.rajsingh.info/v1alpha1
kind: GarageBucket
metadata:
  labels:
    app.kubernetes.io/name: garage-operator
    app.kubernetes.io/managed-by: kustomize
  name: my-bucket
  namespace: garage-operator-system
spec:
  clusterRef:
    name: garage

  # Bucket quotas
  quotas:
    maxSize: 10Gi
    maxObjects: 100000

  # Key permissions
  keyPermissions:
    - keyRef: app-key
      read: true
      write: true

  # Note: CORS and Lifecycle rules are NOT supported via the Garage Admin API.
  # Configure these using the S3 API directly:
  # - CORS: Use PutBucketCors S3 API
  # - Lifecycle: Use PutBucketLifecycleConfiguration S3 API
---
# Website bucket example
apiVersion: garage.rajsingh.info/v1alpha1
kind: GarageBucket
metadata:
  name: website-bucket
  namespace: garage-operator-system
spec:
  clusterRef:
    name: garage

  website:
    enabled: true
    indexDocument: index.html
    errorDocument: error.html

  # Public read access
  keyPermissions:
    - keyRef: website-key
      read: true
      owner: true
---
# Metrics bucket (referenced by monitoring-key's allBuckets + bucketPermissions)
apiVersion: garage.rajsingh.info/v1alpha1
kind: GarageBucket
metadata:
  name: metrics-bucket
  namespace: garage-operator-system
spec:
  clusterRef:
    name: garage

  quotas:
    maxSize: 5Gi
